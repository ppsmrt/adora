<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"/>
<title>Corporate Tenant Directory</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0; padding:0;
  width:100vw; height:100vh;
  overflow:hidden;
  font-family:"Inter","Roboto",sans-serif;
  background:#0a0c14;
  color:#fff;
}

/* Background */
canvas#background {
  position:fixed; top:0; left:0;
  width:100%; height:100%;
  z-index:0;
}

/* Directory */
#directoryView {
  position:fixed; top:0; left:0;
  width:100%; height:100%;
  display:flex; justify-content:center; align-items:center;
  z-index:1;
  padding:5vh 5vw;
}

.directory-container {
  width:90%; max-width:1400px;
  padding:4vh 3vw;
  background: linear-gradient(135deg, rgba(0,195,255,0.08), rgba(0,91,234,0.12));
  backdrop-filter: blur(25px) saturate(160%);
  border-radius:30px;
  box-shadow:0 25px 70px rgba(0,0,0,0.55);
  display:flex; flex-direction:column; gap:3vh;
  overflow-y:auto;
  max-height:85vh;
  animation:fadeUp 1.2s ease;
}

/* Title */
.directory-title {
  font-size:5.5vh; font-weight:800; text-align:center;
  background: linear-gradient(90deg,#00c3ff,#005bea,#00ffcc);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  letter-spacing:1px;
  margin-bottom:2vh;
  position:relative;
}
.directory-title::after {
  content:"";
  display:block;
  width:80px; height:4px;
  margin:12px auto 0;
  background:linear-gradient(90deg,#00c3ff,#005bea);
  border-radius:4px;
  animation:glowLine 2s infinite alternate;
}

/* Floor Section */
.floor-section {
  display:flex; align-items:center; justify-content:space-between;
  padding:2.5vh 2vw;
  border-radius:20px;
  background: rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.08);
  gap:2vw;
  transform:translateY(40px);
  opacity:0;
  animation:slideUp 0.9s forwards;
  box-shadow:0 10px 35px rgba(0,0,0,0.35);
  transition: all 0.3s ease;
}
.floor-section:hover {
  transform:translateY(0) scale(1.02);
  border-color:rgba(0,195,255,0.4);
  box-shadow:0 20px 50px rgba(0,195,255,0.25);
}

/* Floor label */
.floor-num {
  font-size:3.5vh;
  font-weight:700;
  color:#00c3ff;
  flex:0 0 120px;
  text-shadow:0 0 8px rgba(0,195,255,0.4);
}

/* Logos */
.tenant-logos {
  display:flex; flex-wrap:wrap; gap:1.2vw;
  flex:1;
}
.tenant-logos img {
  height:8vh; width:auto;
  border-radius:14px;
  padding:6px;
  background:rgba(255,255,255,0.08);
  box-shadow:0 6px 20px rgba(0,0,0,0.35);
  transition:all 0.35s ease;
}
.tenant-logos img:hover {
  transform:scale(1.2) rotate(-3deg);
  background:rgba(0,195,255,0.12);
  box-shadow:0 12px 30px rgba(0,195,255,0.35);
}

/* Animations */
@keyframes slideUp { to{transform:translateY(0); opacity:1;} }
@keyframes fadeUp { from{opacity:0; transform:translateY(30px);} to{opacity:1; transform:translateY(0);} }
@keyframes glowLine { from{opacity:0.4;} to{opacity:1;} }

@media(max-width:768px){
  .directory-title{font-size:7vw;}
  .floor-section{flex-direction:column; align-items:flex-start; gap:1.5vh;}
  .floor-num{font-size:5vw;}
  .tenant-logos img{height:14vw;}
}
</style>
</head>
<body>
<canvas id="background"></canvas>
<div id="directoryView"></div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyCrGIB_YK33p_2EPTpU-klZ_3xQ5TOPm4c",
    authDomain: "adora-ad.firebaseapp.com",
    databaseURL: "https://adora-ad-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "adora-ad",
    storageBucket: "adora-ad.appspot.com",
    messagingSenderId: "550034277527",
    appId: "1:550034277527:web:966b16ce942a161e8955d2",
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const directoryView = document.getElementById("directoryView");
  const floorsRef = ref(db, "blocks/A/floors");

  function ordinal(n){ const s=["th","st","nd","rd"], v=n%100; return n+(s[(v-20)%10]||s[v]||s[0]); }

  onValue(floorsRef, snapshot => {
    const data = snapshot.val();
    directoryView.innerHTML="";

    const container = document.createElement("div");
    container.className="directory-container";

    const title = document.createElement("div");
    title.className="directory-title";
    title.textContent="Tenant Directory";
    container.appendChild(title);

    Object.keys(data).forEach((floor,i)=>{
      const tenantsObj = data[floor].tenants;
      if(!tenantsObj) return;

      const floorSection = document.createElement("div");
      floorSection.className="floor-section";
      floorSection.style.animationDelay = `${i*0.15}s`;

      const floorNum = document.createElement("div");
      floorNum.className="floor-num";
      floorNum.textContent = ordinal(Number(floor)) + " Floor";

      const logosDiv = document.createElement("div");
      logosDiv.className="tenant-logos";

      Object.keys(tenantsObj).forEach(key=>{
        const img = document.createElement("img");
        img.src = tenantsObj[key].logo;
        img.alt = tenantsObj[key].name;
        logosDiv.appendChild(img);
      });

      floorSection.appendChild(floorNum);
      floorSection.appendChild(logosDiv);
      container.appendChild(floorSection);
    });

    directoryView.appendChild(container);
  });

  // --- Background animation ---
  const canvas = document.getElementById("background");
  const ctx = canvas.getContext("2d");
  let shapes = [];

  function initShapes(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    shapes = [];
    for(let i=0;i<60;i++){
      shapes.push({
        x:Math.random()*canvas.width,
        y:Math.random()*canvas.height,
        size:Math.random()*28+12,
        dx:(Math.random()-0.5)*0.5,
        dy:(Math.random()-0.5)*0.5,
        angle:Math.random()*360
      });
    }
  }
  function animateShapes(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    shapes.forEach(s=>{
      ctx.save();
      ctx.translate(s.x,s.y);
      ctx.rotate(s.angle*Math.PI/180);
      ctx.strokeStyle = "rgba(0,195,255,0.2)";
      ctx.lineWidth = 1;
      ctx.strokeRect(-s.size/2,-s.size/2,s.size,s.size);
      ctx.restore();
      s.x += s.dx; s.y += s.dy; s.angle += 0.25;
      if(s.x<0||s.x>canvas.width) s.dx*=-1;
      if(s.y<0||s.y>canvas.height) s.dy*=-1;
    });
    requestAnimationFrame(animateShapes);
  }
  window.addEventListener("resize",()=>{ initShapes(); });
  initShapes(); animateShapes();
</script>
</body>
</html>