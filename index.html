<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Global InfoCity Park Chennai</title>
<style>
body {
  margin:0;
  font-family:"Poppins",sans-serif;
  background:linear-gradient(135deg,#fff6e5,#ff9e42);
  min-height:100vh;
  overflow-x:hidden;
  color:#222;
  position:relative;
}
#particles-js {position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none;}

/* Full page tenant intro */
#tenantIntro {
  position:fixed;
  top:0;left:0;
  width:100%;
  height:100%;
  background:rgba(255,255,255,0.95);
  z-index:5;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  overflow:hidden;
}
.floor-label {font-size:28px;color:#ff6a00;margin-bottom:20px;}
.tenant-name {
  font-size:48px;
  font-weight:900;
  color:#ff6a00;
  letter-spacing:2px;
  margin-bottom:20px;
  background:linear-gradient(90deg,#ff6a00,#ffd36e);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  text-shadow:0 0 12px #ffd36e;
  animation:glowText 2s ease-in-out infinite alternate;
}
.tenant-logo {height:120px; border-radius:12px; background:white; padding:12px; filter:drop-shadow(0 4px 12px rgba(0,0,0,0.25));}

/* Main Home Content */
#mainContent {display:none; position:relative; z-index:2; text-align:center; padding-bottom:40px;}
.heading {
  font-size:36px;
  font-weight:800;
  color:#ff6a00;
  text-transform:uppercase;
  letter-spacing:2px;
  margin:20px 0;
  background:linear-gradient(90deg,#ff6a00,#ffd36e);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:glowText 2s ease-in-out infinite alternate;
}
.title {display:flex;justify-content:space-between; padding:10px 14px; border-top:3px solid #ff6a00; border-bottom:3px solid #ff6a00; font-weight:bold; font-style:italic; font-size:22px; text-transform:uppercase; margin-bottom:10px;}
.title span {text-decoration:underline;color:#ff6a00;}
table {width:100%; border-collapse:collapse; margin-top:10px;}
td.floor {font-weight:bold;font-size:20px;width:70px;color:#ff6a00;}
td.company {display:flex;justify-content:center;gap:20px;flex-wrap:wrap; min-height:60px;align-items:center;}
.company-item {display:flex;flex-direction:column;align-items:center;margin:6px 12px;opacity:0; transition:transform 0.3s ease; cursor:pointer;}
.company-item img {max-height:60px;max-width:140px;margin-bottom:10px;border-radius:12px;background:white;padding:6px;transition:transform 0.3s ease, box-shadow 0.3s ease;}
.company-item img:hover {transform:scale(1.1); box-shadow:0 6px 16px rgba(0,0,0,0.35);}
.company-item span {font-size:16px;font-weight:600;color:#ff6a00;text-shadow:0 0 8px #ffd36e;letter-spacing:0.5px;}

@keyframes glowText {0%{text-shadow:0 0 8px #ff6a00,0 0 16px #ffd36e;}100%{text-shadow:0 0 16px #ff6a00,0 0 32px #ffd36e;}}
</style>
</head>
<body>
<div id="particles-js"></div>

<!-- Full Page Tenant Intro -->
<div id="tenantIntro"></div>

<!-- Main Content -->
<div id="mainContent" class="container">
  <div class="heading">Tenant Directory</div>
  <div class="title"><span>FLOOR</span><span>BLOCK-A</span></div>
  <table id="directory"><tbody id="floors"></tbody></table>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyCrGIB_YK33p_2EPTpU-klZ_3xQ5TOPm4c",
  authDomain: "adora-ad.firebaseapp.com",
  databaseURL: "https://adora-ad-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "adora-ad",
  storageBucket: "adora-ad.firebasestorage.app",
  messagingSenderId: "550034277527",
  appId: "1:550034277527:web:966b16ce942a161e8955d2",
  measurementId: "G-QW5Y41EKLR"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const floorsRef = ref(db,"blocks/A/floors");

const tenantIntro = document.getElementById("tenantIntro");
const floorsContainer = document.getElementById("floors");

// Helper for ordinal floor names
function ordinal(n){
  const s=["th","st","nd","rd"], v=n%100;
  return n+(s[(v-20)%10]||s[v]||s[0]);
}

onValue(floorsRef,(snapshot)=>{
  const data = snapshot.val();
  const tenantsSequence=[]; // Flatten all tenants with floor info

  Object.keys(data).forEach(floor=>{
    const tenantsObj=data[floor].tenants;
    if(tenantsObj){
      Object.keys(tenantsObj).forEach(key=>{
        tenantsSequence.push({
          name: tenantsObj[key].name,
          logo: tenantsObj[key].logo,
          floor: ordinal(Number(floor))
        });
      });
    }
  });

  let currentIndex=0;

  function showNextTenant(){
    tenantIntro.innerHTML="";
    if(currentIndex<tenantsSequence.length){
      const tenant=tenantsSequence[currentIndex];

      const floorLabel=document.createElement("div");
      floorLabel.className="floor-label";
      floorLabel.textContent=`${tenant.floor} Floor`;
      tenantIntro.appendChild(floorLabel);

      const tenantName=document.createElement("div");
      tenantName.className="tenant-name";
      tenantName.textContent=tenant.name;
      tenantIntro.appendChild(tenantName);

      const logoImg=document.createElement("img");
      logoImg.className="tenant-logo";
      logoImg.src=tenant.logo;
      tenantIntro.appendChild(logoImg);

      currentIndex++;
      setTimeout(showNextTenant,5000);
    } else {
      tenantIntro.style.display="none";
      document.getElementById("mainContent").style.display="block";

      // Populate full directory table
      floorsContainer.innerHTML="";
      Object.keys(data).forEach(floorKey=>{
        const tenantsObj=data[floorKey].tenants;
        let row=`<tr><td class="floor">${floorKey}</td><td class="company">`;
        if(tenantsObj && Object.keys(tenantsObj).length>0){
          Object.keys(tenantsObj).forEach((key,idx)=>{
            const tenant=tenantsObj[key];
            row+=`<div class="company-item" style="animation:fadeInUp 1s ease ${idx*0.3}s forwards;"><img src="${tenant.logo}" alt="${tenant.name}"/><span>${tenant.name}</span></div>`;
          });
        } else {
          row+=`<span style="color:#ff6a00; font-weight:600;">No tenants</span>`;
        }
        row+=`</td></tr>`;
        floorsContainer.innerHTML+=row;
      });
    }
  }

  showNextTenant();
});
</script>

<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script>
particlesJS("particles-js",{
  "particles":{
    "number":{"value":60},
    "size":{"value":3},
    "move":{"speed":2},
    "line_linked":{"enable":true,"color":"#ff6a00"},
    "color":{"value":"#ff6a00"}
  }
});
</script>
</body>
</html>