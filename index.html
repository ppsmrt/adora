<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"/>
<title>Corporate Tenant Directory</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0; padding:0;
  width:100vw; height:100vh;
  overflow:hidden;
  font-family:"Inter", sans-serif;
  background:#000;
  color:#fff;
}

/* Base gradient */
body::before {
  content:"";
  position:fixed; inset:0;
  background:linear-gradient(135deg,#00111f,#001f33,#002f44);
  background-size:600% 600%;
  animation:bgShift 60s infinite linear;
  z-index:-3;
}
@keyframes bgShift {
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

/* Nature GIF overlay */
#natureBg {
  position:fixed; inset:0;
  object-fit:cover;
  z-index:-2;
  opacity:0.25;
  transition:opacity 2s ease;
  pointer-events:none;
}

/* Gradient particles canvas */
#particles {
  position:fixed; inset:0;
  z-index:-1;
  pointer-events:none;
}

/* Directory container */
#directoryView {
  position:fixed; inset:0;
  display:flex; justify-content:center; align-items:center;
  padding:6vh 4vw;
  overflow-y:auto;
}
.directory-container {
  width:95%; max-width:1500px;
  padding:5vh 4vw;
  border-radius:28px;
  display:flex; flex-direction:column; gap:4vh;
  animation:fadeIn 1.5s ease forwards;
}
@keyframes fadeIn {
  from{opacity:0; transform:translateY(40px);}
  to{opacity:1; transform:translateY(0);}
}

/* Title */
.directory-title {
  font-size:6vh;
  font-weight:800;
  text-align:center;
  font-family:"Orbitron",sans-serif;
  background:linear-gradient(90deg,#ff6ec4,#7873f5,#4adeff,#5af78d);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  text-transform:uppercase;
  letter-spacing:3px;
  margin-bottom:2vh;
  position:relative;
}
.directory-title::after {
  content:"";
  display:block;
  width:100px; height:5px;
  margin:18px auto 0;
  border-radius:4px;
  background:linear-gradient(90deg,#4adeff,#5af78d);
  animation:glowBar 2.5s infinite alternate;
}
@keyframes glowBar {
  from{opacity:0.3; transform:scaleX(0.6);}
  to{opacity:1; transform:scaleX(1);}
}

/* Floor sections */
.floor-section {
  display:flex; align-items:center; justify-content:space-between;
  padding:3vh 2.5vw;
  border-radius:20px;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.12);
  box-shadow:0 12px 45px rgba(0,0,0,0.4);
  gap:3vw;
  transform:translateY(50px);
  opacity:0;
  animation:slideUp 1s forwards;
  transition:all 0.4s ease;
}
@keyframes slideUp { to{transform:translateY(0); opacity:1;} }

/* Floor number */
.floor-num {
  font-size:3.8vh;
  font-weight:700;
  color:#5af78d;
  flex:0 0 150px;
  font-family:"Orbitron",sans-serif;
  text-shadow:0 0 12px rgba(90,247,141,0.6);
}

/* Logos grid */
.tenant-logos {
  display:flex; flex-wrap:wrap; gap:1.6vw;
  flex:1;
}
.tenant-logos img {
  height:9vh; width:auto;
  border-radius:18px;
  padding:8px;
  background:rgba(255,255,255,0.07);
  box-shadow:0 8px 25px rgba(0,0,0,0.35);
  transition:transform 0.5s ease;
}
.tenant-logos img:hover {
  transform:scale(1.15) rotate(-2deg);
}

/* Responsive */
@media(max-width:768px){
  .directory-title{font-size:7vw;}
  .floor-section{flex-direction:column; align-items:flex-start; gap:2vh;}
  .floor-num{font-size:5.5vw;}
  .tenant-logos img{height:16vw;}
}
</style>
</head>
<body>
<video id="natureBg" autoplay muted loop></video>
<canvas id="particles"></canvas>
<div id="directoryView"></div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyCrGIB_YK33p_2EPTpU-klZ_3xQ5TOPm4c",
    authDomain: "adora-ad.firebaseapp.com",
    databaseURL: "https://adora-ad-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "adora-ad",
    storageBucket: "adora-ad.appspot.com",
    messagingSenderId: "550034277527",
    appId: "1:550034277527:web:966b16ce942a161e8955d2",
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const directoryView = document.getElementById("directoryView");
  const floorsRef = ref(db, "blocks/A/floors");

  function ordinal(n){ const s=["th","st","nd","rd"], v=n%100; return n+(s[(v-20)%10]||s[v]||s[0]); }

  onValue(floorsRef, snapshot => {
    const data = snapshot.val();
    directoryView.innerHTML="";

    const container = document.createElement("div");
    container.className="directory-container";

    const title = document.createElement("div");
    title.className="directory-title";
    title.textContent="Tenant Directory";
    container.appendChild(title);

    Object.keys(data).forEach((floor,i)=>{
      const tenantsObj = data[floor].tenants;
      if(!tenantsObj) return;

      const floorSection = document.createElement("div");
      floorSection.className="floor-section";
      floorSection.style.animationDelay = `${i*0.2}s`;

      const floorNum = document.createElement("div");
      floorNum.className="floor-num";
      floorNum.textContent = ordinal(Number(floor)) + " Floor";

      const logosDiv = document.createElement("div");
      logosDiv.className="tenant-logos";

      Object.keys(tenantsObj).forEach(key=>{
        const img = document.createElement("img");
        img.src = tenantsObj[key].logo;
        img.alt = tenantsObj[key].name;
        logosDiv.appendChild(img);
      });

      floorSection.appendChild(floorNum);
      floorSection.appendChild(logosDiv);
      container.appendChild(floorSection);
    });

    directoryView.appendChild(container);
  });

  /* --- Particle system --- */
  const canvas = document.getElementById("particles");
  const ctx = canvas.getContext("2d");
  let particles = [];

  function resizeCanvas(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    particles = [];
    for(let i=0;i<40;i++){
      particles.push({
        x:Math.random()*canvas.width,
        y:Math.random()*canvas.height,
        r:Math.random()*40+20,
        dx:(Math.random()-0.5)*0.3,
        dy:(Math.random()-0.5)*0.3,
        color:`hsla(${Math.random()*360}, 100%, 60%, 0.15)`
      });
    }
  }
  function animateParticles(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{
      ctx.beginPath();
      const gradient = ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r);
      gradient.addColorStop(0,p.color);
      gradient.addColorStop(1,"transparent");
      ctx.fillStyle=gradient;
      ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
      ctx.fill();
      p.x+=p.dx; p.y+=p.dy;
      if(p.x<0||p.x>canvas.width) p.dx*=-1;
      if(p.y<0||p.y>canvas.height) p.dy*=-1;
    });
    requestAnimationFrame(animateParticles);
  }
  window.addEventListener("resize",resizeCanvas);
  resizeCanvas(); animateParticles();

  /* --- Nature GIF rotation --- */
  const gifList = [
    "https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.mp4", // spring blossoms
    "https://media.giphy.com/media/3o6Zt481isNVuQI1l6/giphy.mp4", // flowing water
    "https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.mp4", // forest
    "https://media.giphy.com/media/xT0GqssRweIhlz209i/giphy.mp4"  // sunlight leaves
  ];
  const natureBg = document.getElementById("natureBg");
  let index=0;
  function rotateGif(){
    natureBg.style.opacity=0;
    setTimeout(()=>{
      index=(index+1)%gifList.length;
      natureBg.src=gifList[index];
      natureBg.load();
      natureBg.play();
      natureBg.style.opacity=0.25;
    },2000);
  }
  natureBg.src=gifList[index];
  natureBg.play();
  setInterval(rotateGif,60000); // every 1 minute
</script>
</body>
</html>